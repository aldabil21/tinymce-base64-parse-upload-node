<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible"
    content="IE=edge">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0">
  <title>Tiny Image Src Parser</title>

  <!-- Axios CDN -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

  <!-- Core JS solution -->
  <script src="/js/parser.js"></script>
</head>

<body>
  <div style="text-align: center; max-width:800px; margin:auto;">
    <h1>Past your Tiny JSON content here</h1>
    <h1>to parseAndUpload images</h1>
    <textarea style="max-width: 800px;max-height: 400px; width:100%;height:300px; background:#eee;"></textarea>

    <button style="min-width: 100px;">
      <h4>Process</h4>
    </button>
    <button style="min-width: 100px;"
      onclick="TinyImgParser.resetTextareaExample()">
      <h4>Reset</h4>
    </button>

    <!-- Preview After Parse -->
    <section id="preview"></section>
    <!-- Progress -->
    <div id="dackdrop"
      style="position: fixed; top:0; left:0; width:100%; height:100%;
      background:#000000c2;display: flex; align-items: center;
      justify-content: center; display: none;">
      <progress style="height: 2em; margin: 5px 10px;"
        max="100"
        value="0"></progress>
      <h4 style="color:#ccc">0%</h4>
    </div>
  </div>
  <script>
    // Set initial textarea value to example json
    TinyImgParser.resetTextareaExample();
    // upload action
    document.querySelector("button").addEventListener("click", async () => {
      const val = document.querySelector("textarea");
      try {
        const json = JSON.parse(val.value);
        new TinyImgParser(json).parseAndUpload();
      } catch (error) {
        alert("Something's wrong with the json format")
      }
    })
  </script>
</body>

</html>